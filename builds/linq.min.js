!function(){"use strict";function a(a,b){return a===b||a.valueOf()===b.valueOf()}function b(a,b){return a===b?0:null==a?-1:null==b?1:"string"==typeof a?a.toString().localeCompare(b.toString()):a.valueOf()-b.valueOf()}function c(){return!0}function d(a){return a}var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,f=(e.lq,function(a){return a instanceof f?a:this instanceof f?void(this._wrapped=a):new f(a)});"undefined"==typeof exports||exports.nodeType?e.lq=f:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=f),exports.lq=f);var g=function(a){return function(b){return null==b?void 0:b[a]}},h=Math.pow(2,53)-1,i=g("length"),j=function(a){var b=i(a);return"number"==typeof b&&b>=0&&b<=h};f.select=f.map||function(a,b){b=b||window;for(var c=[],d=this.length,e=0;e<d;e++)c.push(a.call(b,this[e],e,this));return c},f.selectMany=function(a,b){return b=b||function(a,b){return b},this.aggregate(function(c,d){return c.concat(a(d).select(function(a){return b(d,a)}))},[])},f.take=function(a){return this.slice(0,a)},f.skip=Array.prototype.slice,f.first=function(a,b){var c=this.length;if(!a)return c?this[0]:null==b?null:b;for(var d=0;d<c;d++)if(a(this[d],d,this))return this[d];return null==b?null:b},f.last=function(a,b){var c=this.length;if(!a)return c?this[c-1]:null==b?null:b;for(;c-- >0;)if(a(this[c],c,this))return this[c];return null==b?null:b},f.union=function(a){return this.concat(a).distinct()},f.intersect=function(b,c){return c=c||a,this.distinct(c).where(function(a){return b.contains(a,c)})},f.except=function(b,c){b instanceof Array||(b=[b]),c=c||a;for(var d=this.length,e=[],f=0;f<d;f++){for(var g=b.length,h=!1;g-- >0;)if(c(this[f],b[g])===!0){h=!0;break}h||e.push(this[f])}return e},f.distinct=function(a){for(var b=[],c=this.length,d=0;d<c;d++)b.contains(this[d],a)||b.push(this[d]);return b},f.zip=function(a,b){return this.take(Math.min(this.length,a.length)).select(function(c,d){return b(c,a[d])})},f.indexOf=Array.prototype.indexOf||function(a,b){for(var c=this.length,d=Math.max(Math.min(b,c),0)||0;d<c;d++)if(this[d]===a)return d;return-1},f.lastIndexOf=Array.prototype.lastIndexOf||function(a,b){for(var c=Math.max(Math.min(b||this.length,this.length),0);c-- >0;)if(this[c]===a)return c;return-1},f.remove=function(a){var b=this.indexOf(a);b!=-1&&this.splice(b,1)},f.removeAll=function(a){for(var b,c=0;null!=(b=this.first(a));)c++,this.remove(b);return c},f.orderBy=function(a,c){c=c||b;var e=this.slice(0),f=function(b,d){return c(a(b),a(d))};return e.thenBy=function(a,c){return c=c||b,e.orderBy(d,function(b,d){var e=f(b,d);return 0===e?c(a(b),a(d)):e})},e.thenByDescending=function(a,c){return c=c||b,e.orderBy(d,function(b,d){var e=f(b,d);return 0===e?-c(a(b),a(d)):e})},e.sort(f)},f.orderByDescending=function(a,c){return c=c||b,this.orderBy(a,function(a,b){return-c(a,b)})},f.innerJoin=function(b,c,d,e,f){f=f||a;var g=[];return this.forEach(function(a){b.where(function(b){return f(c(a),d(b))}).forEach(function(b){g.push(e(a,b))})}),g},f.groupJoin=function(b,c,d,e,f){return f=f||a,this.select(function(a){var e=c(a);return{outer:a,inner:b.where(function(a){return f(e,d(a))}),key:e}}).select(function(a){return a.inner.key=a.key,e(a.outer,a.inner)})},f.groupBy=function(b,c){var e=[],f=this.length;c=c||a,b=b||d;for(var g=0;g<f;g++){var h=b(this[g]),i=e.first(function(a){return c(a.key,h)});i||(i=[],i.key=h,e.push(i)),i.push(this[g])}return e},f.toDictionary=function(a,b){for(var c={},d=this.length;d-- >0;){var e=a(this[d]);null!=e&&""!=e&&(c[e]=b(this[d]))}return c},f.aggregate=Array.prototype.reduce||function(a,b){var c=this.slice(0),d=this.length;null==b&&(b=c.shift());for(var e=0;e<d;e++)b=a(b,c[e],e,this);return b},f.min=function(a){a=a||d;for(var b=this.length,c=a(this[0]);b-- >0;)a(this[b])<c&&(c=a(this[b]));return c},f.max=function(a){a=a||d;for(var b=this.length,c=a(this[0]);b-- >0;)a(this[b])>c&&(c=a(this[b]));return c},f.sum=function(a){a=a||d;for(var b=this.length,c=0;b-- >0;)c+=a(this[b]);return c},f.where=Array.prototype.filter||function(a,b){b=b||window;for(var c=[],d=this.length,e=0;e<d;e++)a.call(b,this[e],e,this)===!0&&c.push(this[e]);return c},f.any=function(a,b){b=b||window;var c=this.some||function(a,b){var c=this.length;if(!a)return c>0;for(;c-- >0;)if(a.call(b,this[c],c,this)===!0)return!0;return!1};return c.apply(this,[a,b])},f.all=function(a,b){b=b||window,a=a||c;var d=this.every||function(a,b){return this.length==this.where(a,b).length};return d.apply(this,[a,b])},f.takeWhile=function(a){a=a||c;for(var b=this.length,d=[],e=0;e<b&&a(this[e],e)===!0;e++)d.push(this[e]);return d},f.skipWhile=function(a){a=a||c;var b=this.length,d=0;for(d=0;d<b&&a(this[d],d)!==!1;d++);return this.skip(d)},f.contains=function(b,c){c=c||a;for(var d=this.length;d-- >0;)if(c(this[d],b)===!0)return!0;return!1},f.forEach=Array.prototype.forEach||function(a,b){b=b||window;for(var c=this.length,d=0;d<c;d++)a.call(b,this[d],d,this)},f.defaultIfEmpty=function(a){return 0==this.length?[null==a?null:a]:this},Array.range=function(a,b){for(var c=[];b-- >0;)c.push(a++);return c},f.main=function(a,b,c){if(j(a)){for(var d=[];c-- >0;)d.push(b++);return d}return a},f.range=function(a,b,c){if(j(a)){for(var d=[];c-- >0;)d.push(b++);return d}return a},f.unique=function(a,b,c){var d=[];if(j(a)){for(var e=a.length,f=0;f<e;f++){for(var g=a[f],h=!1,i=0;i<d.length;i++)if(g===d[i]){h=!0;break}h||d.push(a[f])}return d}return a},"function"==typeof define&&define.amd&&define("linq",[],function(){return f})}();